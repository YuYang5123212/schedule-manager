<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <!-- 修复移动端缩放和滚动问题 -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>我的日程管理系统</title>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <link rel="stylesheet" href="style.css?v=4.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- 顶部 -->
    <div class="top-bar">
        <div class="logo">📅 个人日程</div>
        <div class="logo">📅 个人日程</div>
        <div id="status" class="status-badge">连接中...</div>
    </div>

    <!-- 主布局 -->
    <div class="main-layout">
        <!-- 日历容器 (增加 fade-anim 类用于动画) -->
        <div class="calendar-section fade-anim" id="calendar-container">
            <div id='calendar'></div>
        </div>

        <!-- 侧边栏 -->
        <div class="sidebar-section">
            <h3>📌 待办事项</h3>
            <h3>📌 待办事项</h3>
            <div id="task-list" class="task-container">
                <p style="color:#999; text-align:center; margin-top:20px">加载中...</p>
            </div>
        </div>
    </div>

    <!-- 自定义新建/编辑弹窗 -->
    <div id="eventModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h3 id="modalTitle">📅 新建日程</h3>
            <input type="text" id="eventTitleInput" placeholder="请输入日程内容 (如: 高数课)" autocomplete="off">

            <div class="color-picker">
                <p>选择分类颜色:</p>
                <div class="color-options">
                    <!-- 蓝色(默认) -->
                    <input type="radio" name="eventColor" value="#4a90e2" id="c1" checked>
                    <label for="c1" style="background:#4a90e2"></label>

                    <!-- 红色(紧急/考试) -->
                    <input type="radio" name="eventColor" value="#ff6b6b" id="c2">
                    <label for="c2" style="background:#ff6b6b"></label>

                    <!-- 绿色(生活/娱乐) -->
                    <input type="radio" name="eventColor" value="#2ecc71" id="c3">
                    <label for="c3" style="background:#2ecc71"></label>

                    <!-- 紫色(社团/其他) -->
                    <input type="radio" name="eventColor" value="#9b59b6" id="c4">
                    <label for="c4" style="background:#9b59b6"></label>

                    <!-- 橙色(作业) -->
                    <input type="radio" name="eventColor" value="#f39c12" id="c5">
                    <label for="c5" style="background:#f39c12"></label>
                </div>
            </div>

            <input type="hidden" id="eventStartInput">
            <input type="hidden" id="eventEndInput">
            <input type="hidden" id="eventIdInput"> <!-- 用于存储正在编辑的事件ID -->

            <div class="modal-buttons">
                <button onclick="closeModal()" class="btn-cancel">取消</button>
                <button onclick="deleteCurrentEvent()" id="btnDelete" class="btn-delete"
                    style="display:none;">删除</button>
                <button onclick="saveEvent()" class="btn-save">保存</button>
            </div>
        </div>
    </div>

    <!-- 悬浮按钮 -->
    <div id="fab-container" class="fab-container">
        <div class="fab-options">
            <button class="fab-btn sub-btn" onclick="changeView('multiMonthYear')" title="年历"><i
                    class="fas fa-calendar"></i></button>
            <button class="fab-btn sub-btn" onclick="changeView('dayGridMonth')" title="月历"><i
                    class="fas fa-calendar-alt"></i></button>
            <button class="fab-btn sub-btn" onclick="changeView('rollingWeek')" title="周视"><i
                    class="fas fa-columns"></i></button>
            <button class="fab-btn sub-btn" onclick="openCreateModal()" title="新建"><i class="fas fa-plus"></i></button>
        </div>
        <div class="fab-btn main-btn" id="fab-main">
            <i class="fas fa-bars"></i>
        </div>
    </div>

    <script type="module" src="script.js?v=4.0"></script>
</body>

</html>